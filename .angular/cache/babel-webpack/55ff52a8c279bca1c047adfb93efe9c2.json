{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../auth/services/auth.service\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"./../main.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/shared/googlemaps/google-maps-API.service\";\nimport * as i6 from \"../car/car.service\";\n\nfunction RoomComponent_agm_marker_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"agm-marker\", 10);\n    i0.ɵɵelementStart(1, \"agm-info-window\");\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"latitude\", item_r5.homeAdress.latitude)(\"longitude\", item_r5.homeAdress.longitude)(\"iconUrl\", item_r5.iconMap);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r5.displayName);\n  }\n}\n\nfunction RoomComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_8_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onMatchCar();\n    });\n    i0.ɵɵelement(2, \"i\", 13);\n    i0.ɵɵtext(3, \"Reunir Agora \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction RoomComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵelement(1, \"i\", 15);\n    i0.ɵɵtext(2, \"Aguarde o Administrador \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction RoomComponent_div_11_label_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"label\", 22);\n    i0.ɵɵelementStart(1, \"input\", 23);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_11_label_11_Template_input_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onDriveOrRide(item_r8, 1);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \" Motorista \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", true);\n  }\n}\n\nfunction RoomComponent_div_11_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelementStart(1, \"label\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 28);\n    i0.ɵɵelementStart(4, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_11_div_13_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onDriveOrRide(item_r8, 1);\n    });\n    i0.ɵɵtext(5, \" 1 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_11_div_13_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.onDriveOrRide(item_r8, 2);\n    });\n    i0.ɵɵtext(7, \" 2 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_11_div_13_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.onDriveOrRide(item_r8, 3);\n    });\n    i0.ɵɵtext(9, \" 3 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_11_div_13_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.onDriveOrRide(item_r8, 4);\n    });\n    i0.ɵɵtext(11, \" 4 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Lugares: \", item_r8.ride, \" \");\n  }\n}\n\nfunction RoomComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelementStart(2, \"h5\", 18);\n    i0.ɵɵelementStart(3, \"span\", 19);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h6\", 20);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function RoomComponent_div_11_Template_div_ngModelChange_7_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const item_r8 = restoredCtx.$implicit;\n      return item_r8.driver = $event;\n    });\n    i0.ɵɵelementStart(8, \"label\", 22);\n    i0.ɵɵelementStart(9, \"input\", 23);\n    i0.ɵɵlistener(\"click\", function RoomComponent_div_11_Template_input_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const item_r8 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.onDriveOrRide(item_r8, 0);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" Carona \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, RoomComponent_div_11_label_11_Template, 3, 1, \"label\", 24);\n    i0.ɵɵelementStart(12, \"div\");\n    i0.ɵɵtemplate(13, RoomComponent_div_11_div_13_Template, 12, 1, \"div\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r8.displayName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r8.homeAdress.address, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", item_r8.driver);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r8.driver == false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r8.driver == true);\n  }\n}\n\nexport let RoomComponent = /*#__PURE__*/(() => {\n  class RoomComponent {\n    constructor(authSvc, modalService, mainSvc, router, apigoogle, carSvc) {\n      var _a, _b;\n\n      this.authSvc = authSvc;\n      this.modalService = modalService;\n      this.mainSvc = mainSvc;\n      this.router = router;\n      this.apigoogle = apigoogle;\n      this.carSvc = carSvc;\n      this.room = {};\n      this.user$ = this.authSvc.afAuth.user;\n      this.admUserRoom = false;\n      this.navigationExtras = {\n        state: {\n          value: null\n        }\n      };\n      this.navigationExtrasCar = {\n        state: {\n          value: null\n        }\n      };\n      const navigation = this.router.getCurrentNavigation();\n      this.room.uidRoom = (_b = (_a = navigation === null || navigation === void 0 ? void 0 : navigation.extras) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.value;\n    }\n\n    ngOnInit() {\n      this.roomObservable = this.onGetOneRoom(this.room.uidRoom);\n      this.roomObservable.subscribe(resp => {\n        this.uidUserCreatorRoom = resp.uidUser;\n        this.roomComplete = resp;\n        this.lat = this.roomComplete.roomAdress.latitude;\n        this.lng = this.roomComplete.roomAdress.longitude;\n        this.user$.subscribe(resp => {\n          this.uidUserRef = resp.uid;\n\n          if (this.uidUserRef == this.uidUserCreatorRoom) {\n            this.admUserRoom = true;\n          }\n        });\n      });\n      this.getMembersOfRoom(this.room.uidRoom);\n\n      if (this.room.uidRoom == null) {\n        this.router.navigate(['dashboard']);\n      }\n    }\n\n    getMembersOfRoom(uidRoom) {\n      this.members = this.mainSvc.membersOfRoom(uidRoom);\n    }\n\n    onUsers(uidUserMember) {\n      this.member = this.mainSvc.getUsers(uidUserMember);\n      return this.member;\n    }\n\n    onGetOneRoom(uidRoom) {\n      return this.mainSvc.getOneRoom(uidRoom);\n    }\n\n    latelong(item) {\n      return item.homeAdress.address;\n    }\n\n    onDriveOrRide(item, numberOfRides) {\n      if (numberOfRides == 0) {\n        item.ride = numberOfRides;\n        item.driver = false;\n        item.iconMap = 'https://marketingspot.com.br/cimages/Logo02.png';\n      } else {\n        item.ride = numberOfRides;\n        item.driver = true;\n        item.iconMap = 'https://marketingspot.com.br/cimages/Logo04.png';\n      }\n\n      this.mainSvc.updateRoom(item, this.room.uidRoom);\n    }\n\n    onMatchCar() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let uidMemberSaveZEROOOO = [];\n        yield new Promise(resolve => {\n          this.members.subscribe(resp => {\n            uidMemberSaveZEROOOO = resp;\n            resolve(uidMemberSaveZEROOOO);\n          });\n        });\n\n        for (let index = 0; index < uidMemberSaveZEROOOO.length; index++) {\n          yield this.carSvc.saveIfMemberHasRideZEROOO(this.roomComplete.uidRoom, uidMemberSaveZEROOOO[index].uid);\n        }\n\n        yield this.carSvc.matchNow(this.roomComplete);\n      });\n    }\n\n  }\n\n  RoomComponent.ɵfac = function RoomComponent_Factory(t) {\n    return new (t || RoomComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.NgbModal), i0.ɵɵdirectiveInject(i3.MainService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.GoogleMapsAPIService), i0.ɵɵdirectiveInject(i6.CarService));\n  };\n\n  RoomComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RoomComponent,\n    selectors: [[\"app-room\"]],\n    decls: 14,\n    vars: 12,\n    consts: [[1, \"container\", \"mt-0\", \"mb-5\"], [1, \"mt-3\", \"display-5\", \"text-left\"], [1, \"bg-verde\", \"mb-4\", \"mt-0\", \"d-inline-block\", \"mx-auto\", \"ln-verde\"], [3, \"latitude\", \"longitude\", \"zoom\"], [3, \"latitude\", \"longitude\", \"iconUrl\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"container-cards\"], [\"class\", \"mb-3\", 4, \"ngIf\", \"ngIfElse\"], [\"wait\", \"\"], [\"class\", \"card text-center mb-3 mx-2 box-room\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-verde\", \"mb-4\", \"mt-4\", \"d-inline-block\", \"mx-auto\", \"ln-verde-2\"], [3, \"latitude\", \"longitude\", \"iconUrl\"], [1, \"mb-3\"], [1, \"btn\", \"btn-info\", \"btn-lg\", \"btn-block\", 3, \"click\"], [1, \"fas\", \"fa-users\", \"mr-2\"], [\"type\", \"button\", \"disabled\", \"\", \"data-bs-toggle\", \"button\", 1, \"btn\", \"btn-warning\", \"btn-lg\", \"btn-block\", \"mb-3\"], [1, \"fas\", \"fa-hourglass-half\", \"mr-2\"], [1, \"card\", \"text-center\", \"mb-3\", \"mx-2\", \"box-room\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"h3\", \"card-name-dashboard\", \"text-truncate\"], [1, \"card-subtitle\", \"mb-2\", \"text-muted\", \"mb-3\", \"height-45px\"], [\"ngbRadioGroup\", \"\", \"name\", \"radioBasic\", 1, \"btn-group\", \"btn-group-toggle\", \"d-flex\", \"justify-content-center\", 3, \"ngModel\", \"ngModelChange\"], [\"ngbButtonLabel\", \"\", 1, \"btn-primary\", \"btn-locals\"], [\"ngbButton\", \"\", \"type\", \"radio\", 3, \"value\", \"click\"], [\"ngbButtonLabel\", \"\", \"class\", \"btn-primary btn-locals\", 4, \"ngIf\"], [\"class\", \"btn-group\", \"ngbDropdown\", \"\", \"role\", \"group\", \"aria-label\", \"Lugares\", 4, \"ngIf\"], [\"ngbDropdown\", \"\", \"role\", \"group\", \"aria-label\", \"Lugares\", 1, \"btn-group\"], [\"ngbDropdownToggle\", \"\", 1, \"btn\", \"btn-outline-primary\", \"btn-locals\"], [\"ngbDropdownMenu\", \"\", 1, \"dropdown-menu\"], [\"ngbDropdownItem\", \"\", 3, \"click\"]],\n    template: function RoomComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"hr\", 2);\n        i0.ɵɵelementStart(4, \"agm-map\", 3);\n        i0.ɵɵtemplate(5, RoomComponent_agm_marker_5_Template, 4, 4, \"agm-marker\", 4);\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵtemplate(8, RoomComponent_div_8_Template, 4, 0, \"div\", 6);\n        i0.ɵɵtemplate(9, RoomComponent_ng_template_9_Template, 3, 0, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(11, RoomComponent_div_11_Template, 14, 6, \"div\", 8);\n        i0.ɵɵpipe(12, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"hr\", 9);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(10);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Sala: \", ctx.roomComplete.roomName, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"latitude\", ctx.lat)(\"longitude\", ctx.lng)(\"zoom\", 12);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 8, ctx.members));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.admUserRoom)(\"ngIfElse\", _r2);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(12, 10, ctx.members));\n      }\n    },\n    styles: [\".ln-verde[_ngcontent-%COMP%]{width:100%;height:2px}.bg-verde[_ngcontent-%COMP%]{background-color:#49c5b1!important}.ln-verde-2[_ngcontent-%COMP%]{width:100%;height:1px}.buttons-driver-passager[_ngcontent-%COMP%]{min-width:120px}.height-45px[_ngcontent-%COMP%]{height:45px}.btn-locals[_ngcontent-%COMP%]{min-height:50px;max-height:50px;max-width:135px;width:45%!important;margin:0 auto!important;font-size:.7344rem}.btn-group[_ngcontent-%COMP%]{margin:0 5px}.box-room[_ngcontent-%COMP%]{min-height:171px;width:31.5%;float:left}.container-cards[_ngcontent-%COMP%]{height:234px}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:\\\"\\\";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}agm-map[_ngcontent-%COMP%]{height:400px}\"]\n  });\n  return RoomComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}